# 演算子と関数
`CalcNote`は基本的な四則演算だけでなく関数やビット演算などもサポートしています。ここでは使用できる演算子、関数について説明します。

## 演算子
|演算子|説明|例|
|:-----------|:------------|:------------|
`+`|加算|1 `+` 1 = 2
`-`|減算|1 `-` 1 = 0
`*`|乗算|2 `*` 3 = 6
`/`|除算|10 `/` 2 = 5
`mod`|余りを求めます。|5 `mod` 2 = 1
`%`|パーセントの計算に使用します。|1000 + 10`%` = 1100
`$`|`$`の後に行番号を書くことで、その行の答えを参照することができます。|`$1` + `$2`
`0x`|`0x`に続けて16進数を入力することができます。|`0xFA8B`
`0o`|`0o`に続けて8進数を入力することができます。|`0o7712`
`0b`|`0b`に続けて2進数を入力することができます。|`0b0101`
`&`|ビット演算で論理積(AND)を求めます。|0b0101 `&` 0b0011 = 0b0001
<code>&#124;</code>|ビット演算で論理和(OR)を求めます。|0b0101 <code>&#124;</code> 0b0011 = 0b0111
`~`|ビット演算で論理否定(NOT)を求めます。|`~`0b10 = 0b01
`XOR`|ビット演算で排他的論理和(XOR)を求めます。|0b0101 `XOR` 0b0011 = 0b0110
`<<`|ビット演算で左シフトします。|0b0110 `<<` 2 = 0b11000
`>>`|ビット演算で右シフトします。|0b0110 `>>` 2 = 0b0001
`nPr`|順列を求めます。|`5P2` = 20
`nCr`|組み合わせを求めます。|`5C2` = 10
`!`|階乗を求めます。|5`!` = 120
`√`|平方根を求めます。|`√`9 = 3
`^`|累乗を求めます|3 `^` 2 = 9
`=`|変数の定義と代入|MB `=` 1024 * 1024

**※全ての演算子は10進数、16進数、2進数の全てに適用可能です。結果は10進数で表示されます。**

## 関数
|関数|引数|説明|例|
|:-----------|:------------|:------------|:------------|
`sin(x)`|`x`:ラジアンで表した角度|指定された角度の正弦 (サイン) を返します。|
`asin(x)`|`x`:逆正弦を求める対象の値|値の逆正弦 (アークサイン) を返します。返される角度の範囲は、-pi/2 〜 pi/2 の範囲です|
`sinh(x)`|`x`:双曲線正弦を求める対象の値|値の双曲線正弦を返します。xの双曲線正弦は (ex - e-x)/2 で表されます。 ここで、e は Euler's number です。|
`cos(x)`|`x`:ラジアンで表した角度|指定された角度の余弦 (コサイン) を返します。|
`acos(x)`|`x`:逆余弦を求める対象の値|値の逆余弦 (アークコサイン) を返します。返される角度の範囲は、0.0 〜 pi です。|
`cosh(x)`|`x`:双曲線余弦を求める対象の値|値の双曲線余弦を返します。x の双曲線余弦は (ex + e-x)/2 で表されます。 ここで、e は Euler's number です。|
`tan(x)`|`x`:ラジアンで表した角度|指定された角度の正接 (タンジェント) を返します。|
`atan(x)`|`x`:逆正接を求める対象の値|指定された値の逆正接 (アークタンジェント) を返します。返される角度の範囲は、-pi/2 〜 pi/2 の範囲です。|
`tanh(x)`|`x`:双曲線正接を求める対象の値|値の双曲線正接を返します。xの双曲線正接は (ex - e-x)/(ex + e-x) で表されます。 つまり、sinh(x)/cosh(x)。正確な tanh の絶対値は常に 1 未満です。|
`log(x)`|`x`:対数を求める対象の値|指定された値の10を底とする対数を返します。|
`log2(x)`|`x`:対数を求める対象の値|指定された値の2を底とする対数を返します。|
`ln(x)`|`x`:自然対数値を求める対象の値|指定された値の自然対数値 (底は e) を返します。|
`exp(x)`|`x`:eに設定した指数|オイラー数 e を指定した値で累乗した値を返します。|
`round(x)`|`x`:四捨五入する小数|小数点第一位を四捨五入した整数を返します。桁を指定して四捨五入したい場合は rhup 関数を使用してください。|round(100.4) = 100<br>round(100.5) = 101
`rhup(x, places)`|`x`:四捨五入する値です。<br>`places`:丸めた後の小数点以下の桁数です。<br>placesに負の値を指定した場合、整数部分が丸められます。|指定した値を指定した桁数で四捨五入します。|rhup(153.47, 0) = 153<br>rhup(153.47, 1) = 153.5<br>rhup(153.47,-1) = 150
`ceil(x)`|`x`:切り上げする小数|小数点第一位を切り上げした整数を返します。桁を指定して切り上げしたい場合は rup 関数を使用してください。|ceil(100.3) = 101<br>ceil(-100.3)= -100
`rup(x, places)`|`x`:切り上げる値です。<br>`places`:丸めた後の小数点以下の桁数です。<br>placesに負の値を指定した場合、整数部分が丸められます。|指定した値を指定した桁数で切り上げます。|rup(153.47, 0) = 154<br>rup(153.47, 1) = 153.5<br>rup(153.47,-1) = 160
`floor(x)`|`x`:切り捨てする小数|小数点第一位を切り捨てした整数を返します。桁を指定して切り捨てしたい場合は rdown 関数を使用してください。|floor(100.3) = 100<br>floor(-100.3) = -101
`rdown(x, places)`|`x`:切り捨てる値です。<br>`places`:丸めた後の小数点以下の桁数です。<br>placesに負の値を指定した場合、整数部分が丸められます。|指定した値を指定した桁数で切り捨てます。|rdown(153.47, 0) = 153<br>rdown(153.47, 1) = 153.4<br>rdown(153.47,-1) = 150
`cbrt(x)`|`x`:立方根を求める対象の値|値の立方根を返します。正の有限値 x の場合、cbrt(-x) == -cbrt(x)。<br>つまり、負の値の立方根は、値の絶対値の立方根を負にしたものです。|
`abs(x)`|`x`:絶対値求める対象の値|値の絶対値を返します。xが負でない場合はxそのものを返します。<br>負のときは、その正負を逆にした値を返します。|abs(100) = 100<br>abs(-100)= 100
`sum(val1, val2)`|`val1`:開始位置の行参照<br>`val2`:終了位置の行参照|行参照で指定した範囲の合計を返します。|sum($1, $6)
`avg(val1, val2)`|`val1`:開始位置の行参照<br>`val2`:終了位置の行参照|行参照で指定した範囲の平均を返します。|avg($1, $6)
`max(val1, val2)`|`val1`:開始位置の行参照<br>`val2`:終了位置の行参照|行参照で指定した範囲の最大値を返します。|max($1, $6)
`min(val1, val2)`|`val1`:開始位置の行参照<br>`val2`:終了位置の行参照|行参照で指定した範囲の最小値を返します。|min($1, $6)
`var(val1, val2)`|`val1`:開始位置の行参照<br>`val2`:終了位置の行参照|行参照で指定した範囲の分散を返します。|var($1, $6)
`stdev(val1, val2)`|`val1`:開始位置の行参照<br>`val2`:終了位置の行参照|行参照で指定した範囲の標準偏差を返します。|stdev($1, $6)
`median(val1, val2)`|`val1`:開始位置の行参照<br>`val2`:終了位置の行参照|行参照で指定した範囲の中央値を返します。|median($1, $6)
`pmt(rate, nper, pv, [fv], [type])`|`rate`:ローンの利率<br>`nper`:ローン期間全体での支払回数の合計<br>`pv`:ローンの現在価値、つまり、将来行われる一連の支払いを現時点で一括払いした場合の合計金額、または元金を指定します。<br>`[fv]`:投資の将来価値、つまり最後の支払いを行った後に残る現金の収支を指定します。<br>`[type]`:いつ支払いが行われるかを指定します。0:各期の期末 1:各期の期首|一定利率の支払いが定期的に行われる場合の、ローンの定期支払額を算出します。|
`ipmt(rate, per, nper, pv, [fv], [type])`|`rate`:投資期間を通じて一定の利率を指定します。<br>`per`:金利支払額を求める期を 1 ～ "期間" の範囲で指定します。<br>`nper`:投資期間全体での支払回数の合計を指定します。<br>`pv`:投資の現在価値、つまり将来行われる一連の支払いを、現時点で一括払いした場合の合計金額を指定します。<br>`[fv]`:投資の将来価値、つまり最後の支払いを行った後に残る現金の収支を指定します。<br>`[type]`:いつ支払いが行われるかを指定します。0:各期の期末 1:各期の期首|定額の支払いを定期的に行い、利率が一定であると仮定して、投資期間内の指定された期に支払われる金利を返します。|
`ppmt(rate, per, nper, pv, [fv], [type])`|`rate`:投資期間を通じて一定の利率を指定します。<br>`per`:元金支払額を求める期を 1 ～期間の範囲で指定します。<br>`nper`:投資期間全体での支払回数の合計を指定します。<br>`pv`:将来行われる一連の支払いを、現時点で一括払いした場合の合計金額を指定します。<br>`[fv]`:投資の将来価値、つまり最後の支払いを行った後に残る現金の収支を指定します。<br>`[type]`:いつ支払いが行われるかを指定します。0:各期の期末 1:各期の期首|定額の支払いを定期的に行い、利率が一定であると仮定して、投資の指定した期に支払われる元金を返します。|
`fv(rate, nper, pmt, [pv], [type])`|`rate`:投資期間を通じて一定の利率を指定します。<br>`nper`:投資期間全体での支払回数の合計を指定します。<br>`pmt`:毎回の支払額を指定します。<br>`[pv]`:投資の現在価値、つまり将来行われる一連の支払いを、現時点で一括払いした場合の合計金額を指定します。<br>`[type]`:いつ支払いが行われるかを指定します。0:各期の期末 1:各期の期首|一定の利率を基に投資の将来価値を計算します。|
`pv(rate, nper, pmt, [fv], [type])`|`rate`:投資期間を通じて一定の利率を指定します。<br>`nper`:投資期間全体での支払回数の合計を指定します。<br>`pmt`:毎回の支払額を指定します。<br>`[fv]`:投資の将来価値、つまり最後の支払いを行った後に残る現金の収支を指定します。<br>`[type]`:いつ支払いが行われるかを指定します。0:各期の期末 1:各期の期首|一定利率に基づいて、ローンまたは投資の現在価値を計算します。|
`nper(rate, pmt, pv, [fv], [type])`|`rate`:投資期間を通じて一定の利率を指定します。<br>`pmt`:投資期間全体での支払回数の合計を指定します。<br>`pv`:毎回の支払額を指定します。<br>`[fv]`:投資の将来価値、つまり最後の支払いを行った後に残る現金の収支を指定します。<br>`[type]`:いつ支払いが行われるかを指定します。0:各期の期末 1:各期の期首|定額の支払いを定期的に行い、利率が一定であると仮定して、投資に必要な期間を返します。|
`rate(nper, pmt, pv, [fv], [type], [guess])`|`nper`:投資期間全体での支払回数の合計を指定します。<br>`pmt`:毎回の支払額を指定します。<br>`pv`:投資の現在価値、つまり将来行われる一連の支払いを、現時点で一括払いした場合の合計金額を指定します。<br>`[fv]`:投資の将来価値、つまり最後の支払いを行った後に残る現金の収支を指定します。<br>`[type]`:いつ支払いが行われるかを指定します。0:各期の期末 1:各期の期首<br>`[guess]`:利率がおよそどれくらいになるかを推定した値を指定します。|一定期間の投資に対する利率を返します。 RATE では反復計算によって値が算出されるため、結果は 0 個以上になります。|



## 小計
`Subtotal`を使うと小計を計算することができます。キーパッドの表示は`ST`です。`Subtotal`の結果は総合計の計算には含まれません。また複数の`Subtotal`がある場合は、`Subtotal`から`Subtotal`の間の計算結果の合計が表示されます。`Subtotal`のキーワードは設定で変更することが可能です。例えば日本ではキーワードを`小計`に変更したほうが分りやすいかもしれません。

```java
ドリンク
120 * 6    /*=720*/
250 * 6    /*=1500*/
Subtotal   /*=2220*/

フード
480 * 2    /*=960*/
235 * 1    /*=235*/
890 * 2    /*=1780*/
Subtotal   /*=2975*/
Total      /*=5195*/
```

<br><br>
[HOME](index.md)　[基本操作](how2use.md)　[文法](http://burton999dev.github.io/CalcNoteHelp/grammar_ja.html)　[単位変換](unit_converter.md)　[通貨変換](currency_converter.md)　[フローティングウィジェット](floating_widget.md)　[設定](settings.md)　[キーパッドのカスタマイズ](customizing_keypad.md)　[カスタマイズの例](example4theme.md)　[ユーザー拡張機能](custom_extension.md)　[GoogleDriveプラグイン](google_drive_plugin.md)　[FAQ](faq.md)　[使用例](http://android.ascii.jp/2016/02/29/893463)  

